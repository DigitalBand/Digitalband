@(productListPage: models.ListPage[models.ProductEntity], currentCategory: CategoryEntity, categories: Seq[models.CategoryListItem], brands: ListPage[models.BrandEntity], brand:Option[models.BrandEntity], pageNumber: Int)
@import helpers.ViewHelper._
@import Shared._

@main("Каталог", "catalogue") {
    <div class="row">
        <div class="span3 product_list">
            <ul class="breadcrumb">
                <li>
                    @currentCategory.parentId match {
                        case 0 => {@currentCategory.title}
                        case _ => {<a href="@routes.Product.filteredList(currentCategory.parentId, 1, brandId(brand))">@currentCategory.title</a>}
                    }
                </li>
            </ul>
            <ul class="nav nav-tabs nav-stacked">
                @categories.map { category =>
                <li>
                    <a href="@routes.Product.filteredList(category.id, 1, brandId(brand))" title="Товаров в категории: @category.productCount">
                        @category.title.toLowerCase.capitalize
                    </a>
                </li>
                }
            </ul>
        </div>
        <div class="span9">
            <ul class="breadcrumb">
                <li>
                    <a href="#">Home</a> <span class="divider">/</span>
                </li>
                <li>
                    <a href="listings.html">Desktops</a> <span class="divider">/</span>
                </li>
                <li class="active">
                    <a href="category.html">Mac</a>
                </li>
            </ul>
            @brand match {
                case None => {
            <ul class="thumbnails">
                @brands.items.map { brand =>
                <li style="text-align: center">
                    <a href="@routes.Product.filteredList(currentCategory.id, pageNumber, brand.id)" class="thumbnail">
                        <img alt="@brand.title" src="@routes.Image.get(brand.imageId + ".jpg", 100, "71x60", "full")" />
                    </a>
                    <h6>@brand.title</h6>
                </li>
                }
            </ul>
                } case Some(b) => {
                    <a href="@routes.Product.filteredList(currentCategory.id, pageNumber)">@b.title</a>
                }
            }
            @pager(helpers.PagerHelper(productListPage.items.length, productListPage.totalCount, productListPage.number),
                pageNumber => routes.Product.filteredList(currentCategory.id, pageNumber, brandId(brand)))
            @productListPage.items.map { product =>
                <div class="row">
                    <div class="span2">
                        <a href="product.html">
                            <img alt="" id="tmp" src="@routes.Image.get(product.defaultImageId + ".jpg", 90, "170x170", "full")">
                        </a>
                    </div>
                    <div class="span5">
                        <a href="product.html"><h5>@product.title</h5></a>
                        <p>@product.description</p>
                    </div>
                    <div class="span2">
                        <h4>@product.price р.</h4>
                    </div>
                    <div class="span2">
                        <p><a class="btn btn-primary" href="cart.html">В корзину</a></p>
                    </div>
                </div>
                <hr>
            }
            @pager(helpers.PagerHelper(productListPage.items.length, productListPage.totalCount, productListPage.number),
                pageNumber => routes.Product.filteredList(currentCategory.id, pageNumber, brandId(brand)))

        </div>
    </div>
}